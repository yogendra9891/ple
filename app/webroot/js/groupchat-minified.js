var roomArray="global",roomArray=[],i=0,maxChatWnd=4,updatedGbValue=0,newPendGbValue=0,newReqGbValue=0,newNotfGbValue=0,newMeetGbValue=0;function inviteFriends(a){(new Date).getTime();a=$("input[name='friends[]']:checked");var b=[];$.each(a,function(){b.push($(this).val())});""==b&&alert("Pls select users");return!1}
function acceptInvitaion(a,b){$(".right-area").show();var c=$("#chatarea").children(".chatarea-inner:visible").length,d=$("#chatarea").children(".chatarea-inner:visible").length;if(4>d)var e=215*(d+1);0==d&&(e=215);$("#chatarea").css("min-width",e+"px");$(".right-area").css("min-width",e+"px");if(1==c||1<c)$("#chatarea").children(".chatarea-inner").removeClass("one-inner"),$("#chatarea").removeClass("chatarea-wrapper-main");$("#li_"+b).remove();$("#chatarea div:visible");roomArray.push(b);c>=maxChatWnd&&
($("#par_"+roomArray[i]).hide(),void 0!=roomArray[i]&&(c=convertTimeToDate(roomArray[i]),$("#active_chats ul").append("<li class='prq' id='li_"+roomArray[i]+"' style='cursor:pointer;' ><span>"+c+"&nbsp;&nbsp;&nbsp;&nbsp;<input type='image' onclick=reOpenChat('"+roomArray[i]+"') src='"+site_url1+"img/gpchat.png'></span></li>")),i+=1);c='<div id="par_'+b+'" style="float:left;margin-right: 11px;" class="chatarea-inner"><div class="chatarea" id="chatwindow'+b+'" style="float:left;"><iframe src="'+(site_url1+
"/chats/groupFriendsChat/"+a)+'" width="200" height="340" scrolling="no" frameBorder="0"></iframe></div><div class="chatwindowMax" id="chatwindowMax'+b+'" style="display:none;">Max</div></div>';$("#chatarea").append(c);1==$("#chatarea").children(".chatarea-inner:visible").length&&($("#chatarea").children(".chatarea-inner").addClass("one-inner"),$("#chatarea").addClass("chatarea-wrapper-main"));$("#rd"+a).hide()}
function myActiveChats(a,b){$(".right-area").show();var c=$("#chatarea").children(".chatarea-inner:visible").length,d=$("#chatarea").children(".chatarea-inner:visible").length;if(4>d)var e=215*(d+1);0==d&&(e=215);$("#chatarea").css("min-width",e+"px");$(".right-area").css("min-width",e+"px");if(1==c||1<c)$("#chatarea").children(".chatarea-inner").removeClass("one-inner"),$("#chatarea").removeClass("chatarea-wrapper-main");$("#li_"+b).remove();$("#chatarea div:visible");roomArray.push(b);c>=maxChatWnd&&
($("#par_"+roomArray[i]).hide(),void 0!=roomArray[i]&&(c=convertTimeToDate(roomArray[i]),$("#active_chats ul").append("<li class='prq' id='li_"+roomArray[i]+"' style='cursor:pointer;' ><span>"+c+"&nbsp;&nbsp;&nbsp;&nbsp;<input type='image' onclick=reOpenChat('"+roomArray[i]+"') src='"+site_url1+"/img/gpchat.png'></span></li>")),i+=1);c='<div id="par_'+b+'" style="float:left;margin-right: 11px;" class="chatarea-inner"><div class="chatarea" id="chatwindow'+b+'" style="float:left;"> <iframe src="'+(site_url1+
"chats/myActiveChats/"+a)+'" width="200" height="340" scrolling="no" frameBorder="0"></iframe></div><div class="chatwindowMax" id="chatwindowMax'+b+'" style="display:none;">Max</div></div>';$("#chatarea").append(c);1==$("#chatarea").children(".chatarea-inner:visible").length&&($("#chatarea").children(".chatarea-inner").addClass("one-inner"),$("#chatarea").addClass("chatarea-wrapper-main"));$("#act"+a).hide()}
function reOpenChat(a){$(".right-area").show();$("#chatarea div:visible");var b=$("#chatarea").children(".chatarea-inner:visible").length,c=$("#chatarea").children(".chatarea-inner:visible").length;if(4>c)var d=215*(c+1);0==c&&(d=215);$("#chatarea").css("min-width",d+"px");$(".right-area").css("min-width",d+"px");if(1==b||1<b)$("#chatarea").children(".chatarea-inner").removeClass("one-inner"),$("#chatarea").removeClass("chatarea-wrapper-main");roomArray.push(a);b>=maxChatWnd&&(b>=maxChatWnd&&$("#par_"+
roomArray[i]).hide(),void 0!=roomArray[i]&&(b=convertTimeToDate(roomArray[i]),$("#active_chats ul").append("<li class='prq' id='li_"+roomArray[i]+"' style='cursor:pointer;' ><span>"+b+"&nbsp;&nbsp;&nbsp;&nbsp;<input type='image' onclick=reOpenChat('"+roomArray[i]+"') src='"+site_url1+"/img/gpchat.png'></span></li>")),i+=1);$("#li_"+a).remove();$("#par_"+a).show()}
function getPendingRequests(){$.ajax({type:"POST",url:site_url1+"chats/getPendingRequests",data:{}}).done(function(a){$("#pending_request").html(a)})}
function getPendingRequestsCount(){$.ajax({type:"POST",url:site_url1+"chats/getPendingRequestsCount",data:{}}).done(function(a){var b=JSON.parse(a);a=b.count;b=b.showAlert;"0"==a?$("#pending_request_count").hide():($("#pending_request_count").show(),$("#pending_request_count").html(a));newPendGbValue=parseInt(a);updatedGbValue=newPendGbValue+newReqGbValue+newNotfGbValue+newMeetGbValue;0!=updatedGbValue?($("#globalNotify").show(),$("#globalNotify").html(updatedGbValue)):$("#globalNotify").hide();1==
b&&$.msgBox({title:"Notification",content:"New chat request."})})}function rejectInvitaion(a){$.ajax({type:"POST",url:site_url1+"chats/rejectInvitaion",data:{id:a}}).done(function(b){$("#rd"+a).hide()})}
function leaveRoom(a){$("#chatwindow"+a,window.parent.document).hide();$.ajax({type:"POST",url:site_url1+"chats/leaveRoom",data:{roomName:a}}).done(function(b){"true"==b&&$("#chatwindow"+a,window.parent.document).hide()});var b=$("#chatarea").children(".chatarea-inner:visible").length;if(5>b)var c=215*(b-1);$("#chatarea",window.parent.document).css("min-width",c+"px");$(".right-area",window.parent.document).css("min-width",c+"px");$("#li_"+a,window.parent.document).remove();$("#par_"+a,window.parent.document).hide();
b=$("#chatarea",window.parent.document).children(".chatarea-inner:visible").length;1==b&&($("#chatarea",window.parent.document).children(".chatarea-inner").addClass("one-inner"),$("#chatarea",window.parent.document).addClass("chatarea-wrapper-main"));0==b&&$(".right-area",window.parent.document).hide();b=parent.roomArray.indexOf(a);-1<b&&parent.roomArray.splice(b,1);$("#joinmetting_"+a,window.parent.document).show()}
function showNewUsers(a){$("#roster-area-group").show();$("#chat-area").hide();$("#participants").hide()}function showJoinedUsers(){$("#participants").show();$("#chat-area").hide();$("#roster-area-group").hide()}function showChat(){$("#chat-area").show();$("#roster-area-group").hide();$("#participants").hide()}
function requestForJoin(a){$.ajax({type:"POST",url:site_url1+"chats/requestForJoin",data:{roomName:a}}).done(function(a){if("success"==a)return $.msgBox({title:"Alert",content:"Request Sent Successfully."}),!1;if("no_gp_found"==a)return $.msgBox({title:"Alert",content:"This Group not exist now. Please wait to get update."}),!1;if("already_sent"==a)return $.msgBox({title:"Alert",content:"Already Sent."}),!1})}
function getPendingChatRequests(){$.ajax({type:"POST",url:site_url1+"chats/pendingRequests",data:{}}).done(function(a){$("#chat_requests").html(a)})}
function getPendingChatRequestsCount(){$.ajax({type:"POST",url:site_url1+"chats/pendingRequestsCount",data:{}}).done(function(a){var b=JSON.parse(a);a=b.count;b=b.showAlert;newReqGbValue=parseInt(a);updatedGbValue=newPendGbValue+newReqGbValue+newNotfGbValue+newMeetGbValue;0!=updatedGbValue?($("#globalNotify").show(),$("#globalNotify").html(updatedGbValue)):$("#globalNotify").hide();"0"==a?$("#chat_requests_count").hide():($("#chat_requests_count").show(),$("#chat_requests_count").html(newReqGbValue));
1==b&&$.msgBox({title:"Notification",content:"New request to join the active chat."})})}function acceptRequest(a,b){$.ajax({type:"POST",url:site_url1+"chats/approveChatRequests",data:{id:a}}).done(function(b){$.msgBox({title:"Alert",content:b});$("#crd"+a).hide();return!1})}function getNotJoinedActiveChats(){$.ajax({type:"POST",url:site_url1+"chats/getNotJoinedActiveChats",data:{}}).done(function(a){$("#not_joined_activechats").html(a)})}
function rejectRequest(a){$.ajax({type:"POST",url:site_url1+"chats/rejectChatRequests",data:{id:a}}).done(function(b){$.msgBox({title:"Alert",content:b});$("#crd"+a).hide();return!1})}function getCourseName(){var a=site_url1+"chats/getCourseName",b;obj1={};$.ajax({type:"POST",url:a,async:!1,data:"",datatype:"json",success:function(a){b=a}});return b}
function minmiseRoom(a){$("#chatwindowMax"+a,window.parent.document).show();$("#chatwindow"+a,window.parent.document).removeClass("chatarea");$("#chatwindowMax"+a,window.parent.document).addClass("maxchat");var b=a.split("_"),c=new Date(1E3*parseInt(b[1])),b=c.getDate(),d=c.getMonth()+1,e=c.getFullYear(),f=c.getHours(),g=c.getMinutes(),c=c.getSeconds(),k="AM";12<=f&&(k="PM",f-=12);0==f&&(f=12);b="<div class='mxchat'><span>"+userCourse+"-"+d+"/"+b+"/"+e+"/"+f+":"+g+":"+c+" "+k+"</span><span class='mxwindow'><input type='image' src='"+
site_url1+"img/max_window.png' onClick=maximiseRoom('"+a+"') /></span></div>";$("#chatwindowMax"+a,window.parent.document).html(b);$("#chatwindow"+a,window.parent.document).hide()}function maximiseRoom(a){$("#chatwindow"+a).show();$("#chatwindow"+a).addClass("chatarea");$("#chatwindowMax"+a+" .mxchat").removeClass("unread_chat");$("#chatwindowMax"+a).hide()}function showGpActiveUsers(a){$("#ac_"+a).toggle()}
function getSectionType(){var a=site_url1+"chats/getSectionType",b;obj1={};$.ajax({type:"POST",url:a,async:!1,data:"",datatype:"json",success:function(a){b=a}});return b}function getDeniedChatMsg(){$.ajax({type:"POST",url:site_url1+"chats/getDeniedChatMsg",async:!1,data:"",datatype:"json",success:function(a){$("#chatdeny_notification").html(a)}})}
function getDeniedChatMsgCount(){$.ajax({type:"POST",url:site_url1+"chats/getDeniedChatMsgCount",data:{}}).done(function(a){var b=JSON.parse(a);a=b.count;b=b.showAlert;newNotfGbValue=a;updatedGbValue=newPendGbValue+newReqGbValue+newNotfGbValue+newMeetGbValue;0!=updatedGbValue?($("#globalNotify").show(),$("#globalNotify").html(updatedGbValue)):$("#globalNotify").hide();"0"==a?$("#chatdeny_notification_count").hide():($("#chatdeny_notification_count").show(),$("#chatdeny_notification_count").html(a));
1==b&&$.msgBox({title:"Notification",content:"Your request for chat has denied."})})}function hideNotification(a){$.ajax({type:"POST",url:site_url1+"chats/hideNotification",async:!1,data:"id="+a,datatype:"json",success:function(b){if("true"==b)return $.msgBox({title:"Alert",content:"Notification removed!!"}),$("#del_"+a).hide(),!1}})}
function getSameCourseUsers(a){var b;$.ajax({type:"POST",url:site_url1+"users/getSameCourseUsers",async:!1,data:"jid="+a,datatype:"json",success:function(a){b=a}});return b}
function openChatWindow(a){var b=$("#chatarea").children(".chatarea-inner:visible").length,c=$("#chatarea").children(".chatarea-inner:visible").length;$(".right-area").show();if(4>c)var d=215*(c+1);0==c&&(d=215);$("#chatarea").css("min-width",d+"px");$(".right-area").css("min-width",d+"px");if(1==b||1<b)$("#chatarea").children(".chatarea-inner").removeClass("one-inner"),$("#chatarea").removeClass("chatarea-wrapper-main");c="roomid_"+Math.floor((new Date).getTime()/1E3);$("#chatarea div:visible");
roomArray.push(c);b>=maxChatWnd&&($("#par_"+roomArray[i]).hide(),void 0!=roomArray[i]&&(b=convertTimeToDate(roomArray[i]),$("#active_chats ul").append("<li class='prq' id='li_"+roomArray[i]+"' style='cursor:pointer;' ><span>"+b+"&nbsp;&nbsp;&nbsp;&nbsp;<input type='image' onclick=reOpenChat('"+roomArray[i]+"') src='"+site_url1+"img/gpchat.png'></span></li>")),i+=1);a='<div id="par_'+c+'" style="float:left;margin-right: 11px;" class="chatarea-inner"><div class="chatarea" id="chatwindow'+c+'" style="float:left;"><iframe src="'+
(site_url1+"/chats/groupChat/"+a+"/"+c)+'" width="200" height="340" frameBorder="0" scrolling="no" ></iframe></div><div class="chatwindowMax" id="chatwindowMax'+c+'" style="display:none;">Max</div></div>';$("#chatarea").append(a);1==$("#chatarea").children(".chatarea-inner:visible").length&&($("#chatarea").children(".chatarea-inner").addClass("one-inner"),$("#chatarea").addClass("chatarea-wrapper-main"))}
function showJoinedChatDiv(){$("#act_ch_j").is(":visible")?$("#active_chats .slimScrollDiv").animate({height:"0px"},500):$("#active_chats .slimScrollDiv").animate({height:"150px"},500);$("#act_ch_j").toggle("slow",function(){showhidetogglearea("act_ch_j","act_ch_j_max","act_ch_j_min");$("#act_ch_j_max").is(":visible")?($("#act_ch_j").slimscroll({height:"150px"}),$("#act_ch_j_max").hide(),$("#act_ch_j_min").show()):$("#act_ch_j_min").is(":visible")&&($("#act_ch_j_min").hide(),$("#act_ch_j_max").show())})}
function showNotJoinedChatDiv(){$("#not_joined_activechats").is(":visible")?$("#not_joined_activechats-wrapper .slimScrollDiv").animate({height:"0px"},500):$("#not_joined_activechats-wrapper .slimScrollDiv").animate({height:"190px"},500);$("#not_joined_activechats").toggle("slow",function(){showhidetogglearea("not_joined_activechats","act_ch_nj_max","act_ch_nj_min");$("#act_ch_nj_max").is(":visible")?($("#not_joined_activechats").slimscroll({height:"190px"}),$("#act_ch_nj_max").hide(),$("#act_ch_nj_min").show()):
$("#act_ch_nj_min").is(":visible")&&($("#act_ch_nj_min").hide(),$("#act_ch_nj_max").show())})}
function showPendingChatDiv(){$("#pending_request").is(":visible")?$("#pending_request-wrapper\t .slimScrollDiv").animate({height:"0px"},500):$("#pending_request-wrapper\t .slimScrollDiv").animate({height:"150px"},500);$("#pending_request").toggle("slow",function(){showhidetogglearea("pending_request","pend_req_max","pend_req_min");$("#pend_req_max").is(":visible")?($("#pending_request").slimscroll({height:"150px"}),$.ajax({type:"POST",url:site_url1+"/chats/markNotificationAsRead",data:{}}).done(function(a){$("#pend_req_max").hide();
$("#pend_req_min").show()})):$("#pend_req_min").is(":visible")&&$.ajax({type:"POST",url:site_url1+"/chats/markNotificationAsRead",data:{}}).done(function(a){$("#pend_req_min").hide();$("#pend_req_max").show()})})}
function showReqChatDiv(){$("#chat_requests").is(":visible")?$("#chat_requests-wrapper .slimScrollDiv").animate({height:"0px"},500):$("#chat_requests-wrapper .slimScrollDiv").animate({height:"150px"},500);$("#chat_requests").toggle("slow",function(){showhidetogglearea("chat_requests","chat_req_max","chat_req_min");$("#chat_req_max").is(":visible")?($("#chat_requests").slimscroll({height:"150px"}),$("#chat_req_max").hide(),$("#chat_req_min").show()):$("#chat_req_min").is(":visible")&&($("#chat_req_min").hide(),
$("#chat_req_max").show())})}
function showChatNotifDiv(){$("#chatdeny_notification").is(":visible")?$("#chatdeny_notification-wrapper .slimScrollDiv").animate({height:"0px"},500):$("#chatdeny_notification-wrapper .slimScrollDiv").animate({height:"150px"},500);$("#chatdeny_notification").toggle("slow",function(){showhidetogglearea("chatdeny_notification","chat_deny_max","chat_deny_min");$("#chat_deny_max").is(":visible")?($("#chatdeny_notification").slimscroll({height:"150px"}),$.ajax({type:"POST",url:site_url1+"/chats/markDenyNotificationAsRead",
data:{}}).done(function(a){$("#chat_deny_max").hide();$("#chat_deny_min").show()})):$("#chat_deny_min").is(":visible")&&$.ajax({type:"POST",url:site_url1+"/chats/markDenyNotificationAsRead",data:{}}).done(function(a){$("#chat_deny_min").hide();$("#chat_deny_max").show()})})}function getUserType(a,b){var c=a.split("@")[0],d;$.ajax({type:"POST",url:site_url1+"/chats/getUserType",async:!1,data:{userType:c,gid:b},datatype:"json",success:function(a){d=a}});return d}
function getRoasterUser(a,b){var c=a.split("@")[0],d;$.ajax({type:"POST",url:site_url1+"/chats/getRoasterUser",async:!1,data:{userType:c,gid:b},datatype:"json",success:function(a){d=a}});return d}function check_groupchat(a){$.ajax({type:"POST",url:site_url1+"chats/checkRosterInChat",data:"chat_room="+a,datatype:"json",success:function(a){},error:function(){}})}
function send_online_rosters(a,b){var c=a.split("@"),d=c[0],e=getcurrentroomusers(b),c="";if(0<$("#roster-area-group li#"+d).length)c="";else{for(var f=0,c=0;c<e.length;c++)if(d==e[c]){f=1;break}c=f?"<li class='gonline_users' id='"+d+"' style='display:none;' ><input type='checkbox' value='"+a+"' name= invite_friends[] /><span class='"+($("#"+a).attr("class")||"roster-contact online")+"'><span class='roster-name'>"+d+"</span></span></li>":a==b?"":"<li class='gonline_users' id='"+d+"'><input type='checkbox' value='"+
a+"' name= invite_friends[] /><span class='"+($("#"+a).attr("class")||"roster-contact online")+"'><span class='roster-name'>"+d+"</span></span></li>"}$("#roster-area-group ul").append(c);$("#room-name").val(b)}
$(document).ready(function(){$("#add_rosters_ingroup").click(function(){var a=[],b=0;$("input[name='invite_friends[]']:checked").each(function(){a[b]=$(this).val();b++});var c=site_url1+"chats/invitedUsers",d=$("#room-name").html();$.ajax({type:"POST",url:c,data:"chat_room_name="+d+"&iniviteusers="+a,datatype:"json",success:function(b){for(b=0;b<a.length;b++){var c=a[b].split("@");$("#roster-area-group li#"+c[0]).hide()}},error:function(){}})})});
function getcurrentroomusers(a){var b=site_url1+"chats/getCurrentRoomUsers";currentusers={};obj={};a.length&&$.ajax({type:"POST",url:b,async:!1,data:"chatroom_name="+a,datatype:"json",success:function(a){currentusers=obj=eval(a)}});return currentusers}function remove_roster(a,b){var c=a.split("@")[0];$("#roster-area-group li#"+c).hide();$("#participants li#participant-"+c).show()}
function getRoomUsers(){var a=$("#room-name").html(),b=site_url1+"chats/getRoomsUsers";obj={};a.length&&$.ajax({type:"POST",url:b,data:"chatroomname="+a,datatype:"json",success:function(a){obj=eval(a);$("#participants li").each(function(){for(var a=$(this).attr("id").split("-"),b=1,c=0;c<obj.length;c++)if(obj[c]!=a[1])b=0;else{b=1;break}b?$(this).show():$(this).hide()})},error:function(){}})}
function showUsersforInvitation(){var a=$("#room-name").html(),b=site_url1+"chats/getRoomsUsersInvited";obj={};a.length&&$.ajax({type:"POST",url:b,data:"chatroomname="+a,datatype:"json",success:function(a){obj=eval(a);$("#roster-area-group li").each(function(){for(var a=$(this).attr("id"),b=0,c=0;c<obj.length;c++)if(obj[c]!=a)b=0;else{b=1;break}b?$("#roster-area-group li#"+a).hide():$("#roster-area-group li#"+a+" .roster-contact").hasClass("online")?$("#roster-area-group li#"+a).show():$("#roster-area-group li#"+
a).hide()})},error:function(){}})}function show_hidechatwindow(a){$("#chatwindow"+a).toggle()}
function send_rosters_bygroup(a,b){var c=a.find(".roster-jid").text(),d=a.find(".roaster-group").text(),e=getSectionType(),f=getCourseName();if(""!=c&&""!=d){var g=getRoasterUser(c,d);getUserType(c,d)}f.replace(/\s+/g,"");var k=presence_value(a.find(".roster-contact")),l=$("#roster-area-group li");if(1==e&&f==d)if(0<l.length){var h=!1;l.each(function(){var b=presence_value($(this).find(".roster-contact")),d=$(this).find(".roster-jid").text();if(k>b||c<d)return $(this).before(a),h=!1});h||(e=d.replace(/\s+/g,
""),$("#"+e).length||$("#roster-area-group ul").append('<div id="'+e+'" class="online_user_area_gruopchat"><p>'+d+"</p></div>"),$("#"+e).append(a))}else e=d.replace(/\s+/g,""),$("#"+e).length||$("#roster-area-group ul ").append('<div id="'+e+'" class="online_user_area_gruopchat"><p>'+d+"</p></div>"),$("#"+e).append(a);2==g&&(f=f.split("-")[0],g=d.split("-")[0],f==g&&(0<l.length?(h=!1,l.each(function(){var b=presence_value($(this).find(".roster-contact")),d=$(this).find(".roster-jid").text();if(k>
b||c<d)return $(this).before(a),h=!1}),h||(e=d.replace(/\s+/g,""),$("#"+e).length||$("#roster-area-group ul ").append('<div id="'+e+'" class="online_user_area_gruopchat"><p>'+d+"</p></div>"),$("#"+e).append(a))):(e=d.replace(/\s+/g,""),$("#"+e).length||$("#roster-area-group ul ").append('<div id="'+e+'" class="online_user_area_gruopchat"><p>'+d+"</p></div>"),$("#"+e).append(a))))}function presence_value(a){return a.hasClass("online")?2:a.hasClass("away")?1:0}
function send_online_rosters_bygroup(a,b){var c=a.split("@"),d=c[0],e=getcurrentroomusers(b);$("#roster-area-group li#"+d+" .roster-contact").removeClass("offline").addClass("online");for(var f=0,c=0;c<e.length;c++)if(d==e[c]){f=1;break}f||$("#roster-area-group li#"+d).css("display","block")}function emoticon(a){$("#input").focus();$("#input").val($("#input").val()+" "+a+" ")}
function replaceImage(a){var b={":D":"icon_biggrin.gif",":d":"icon_e_biggrin.gif",":-D":"icon_e_biggrin.gif",":-d":"icon_e_biggrin.gif",":)":"icon_smile.gif",":-)":"icon_e_smile.gif",":(":"icon_sad.gif",":-(":"icon_e_sad.gif",":O":"icon_surprised.gif",":o":"icon_surprised.gif",";)":"icon_e_wink.gif",":wink:":"icon_wink.gif","';-)":"icon_e_wink.gif",":shock:":"icon_eek.gif",":?":"icon_confused.gif",":8":"icon_cool.gif","8)":"icon_cool.gif",":lol:":"icon_lol.gif",":X":"icon_mad.gif",":x":"icon_mad.gif",
":P":"icon_razz.gif",":p":"icon_razz.gif",":red:":"icon_redface.gif",":cry:":"icon_cry.gif",":evil:":"icon_evil.gif",":twisted:":"icon_twisted.gif",":roll:":"icon_rolleyes.gif",":!:":"icon_exclaim.gif",":q":"icon_question.gif",":idea:":"icon_idea.gif",":arrow:":"icon_arrow.gif"};return a=a.replace(/:D|:-D|:\)|:-\)|;\)|';-\)|:\(|:-\(|:o|:\?|8-\)|:x|:X|:P|:p|:q|:8|8\)|:lol:|:shock:|:red:|:cry:|:evil:|:twisted:|:roll:|:wink:|:!:|:idea:|:arrow:/gi,function(a){var d;d=b[a];var e=site_url+"/img/smiley/";
return d?'<img src="'+e+d+'" class="emoticons" />':a})}function emailChat(a){a=$("#chat").html();var b=$.trim(a);a=site_url1+"chats/sendNewUserMail";""!=b&&(b=encodeURIComponent(b),$("#email_chatt").toggle(),$("#email_loader").show(),$.ajax({type:"POST",url:a,data:"chat_html="+b,datatype:"json",success:function(a){},complete:function(){$("#email_loader").hide();$("#email_chatt").toggle()}}))}
function showhidetogglearea(a,b,c){$("#pend_req_min").is(":visible")&&$("#pending_request").is(":visible")&&"pending_request"!=a&&($("#pend_req_min").is(":visible")&&$("#pending_request-wrapper .slimScrollDiv").animate({height:"0px"},500),$("#pend_req_max").show(),$("#pend_req_min").hide(),$("#pending_request").toggle("slow",function(){}));$("#act_ch_j_min").is(":visible")&&$("#act_ch_j").is(":visible")&&"act_ch_j"!=a&&($("#act_ch_j_min").is(":visible")&&$("#active_chats .slimScrollDiv").animate({height:"0px"},
500),$("#act_ch_j_max").show(),$("#act_ch_j_min").hide(),$("#act_ch_j").toggle("slow",function(){}));$("#act_ch_nj_min").is(":visible")&&$("#not_joined_activechats").is(":visible")&&"not_joined_activechats"!=a&&($("#act_ch_nj_min").is(":visible")&&$("#not_joined_activechats-wrapper .slimScrollDiv").animate({height:"0px"},500),$("#act_ch_nj_max").show(),$("#act_ch_nj_min").hide(),$("#not_joined_activechats").toggle("slow",function(){}));$("#chat_req_min").is(":visible")&&$("#chat_requests").is(":visible")&&
"chat_requests"!=a&&($("#chat_req_min").is(":visible")&&$("#chat_requests-wrapper .slimScrollDiv").animate({height:"0px"},500),$("#chat_req_max").show(),$("#chat_req_min").hide(),$("#chat_requests").toggle("slow",function(){}));$("#chat_deny_min").is(":visible")&&$("#chatdeny_notification").is(":visible")&&"chatdeny_notification"!=a&&($("#chat_deny_min").is(":visible")&&$("#chatdeny_notification-wrapper .slimScrollDiv").animate({height:"0px"},500),$("#chat_deny_max").show(),$("#chat_deny_min").hide(),
$("#chatdeny_notification").toggle("slow",function(){}));$("#chat_meetings_min").is(":visible")&&$("#meeting_area").is(":visible")&&"meeting_area"!=a&&($("#chat_meetings_min").is(":visible")&&$("#meeting_area-wrapper .slimScrollDiv").animate({height:"0px"},500),$("#chat_meetings_max").show(),$("#chat_meetings_min").hide(),$("#list-meetings").toggle(),$("#meeting_area").toggle("slow",function(){}))}
function notificationTab(){$(".friends_list").hide();$(".meeting-panel").hide();$("#activeChatTab").hide();$(".upper-area").toggle();$(".upper-area").is(":visible")?($("#notf-lazy").hide(),$("#meet-active").hide(),$("#jact-active").hide(),$("#notf-active").show(),$("#meet-lazy").show(),$("#jact-lazy").show(),$("#tab-msg").html("<h3>Notifications</h3>")):($("#notf-active").hide(),$("#notf-lazy").show(),$(".friends_list").show(),$("#tab-msg").html("<h3>Who is Online</h3>"))}
function joinActiveChatTab(){$(".friends_list").hide();$(".meeting-panel").hide();$(".upper-area").hide();$("#activeChatTab").toggle();$("#activeChatTab").is(":visible")?($("#meet-active").hide(),$("#notf-active").hide(),$("#jact-lazy").hide(),$("#jact-active").show(),$("#meet-lazy").show(),$("#notf-lazy").show(),$("#tab-msg").html("<h3>Join active chats</h3>")):($("#jact-active").hide(),$("#jact-lazy").show(),$(".friends_list").show(),$("#tab-msg").html("<h3>Who is Online</h3>"))}
function convertTimeToDate(a){a=a.split("_");var b=new Date(1E3*parseInt(a[1]));a=b.getDate();var c=b.getMonth()+1,d=b.getFullYear(),e=b.getHours(),f=b.getMinutes(),b=b.getSeconds(),g="AM";12<=e&&(g="PM",e-=12);0==e&&(e=12);return userCourse+"-"+c+"/"+a+"/"+d+"/"+e+":"+f+":"+b+" "+g}function getUserStatusData(a){var b;$.ajax({type:"POST",url:site_url1+"users/getUserStatusData",async:!1,data:"jid="+a,datatype:"json",success:function(a){b=a}});return b};
